<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Blog Post - Prashant Baral</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        .logo-font {
            font-family: 'Dancing Script', cursive;
        }

        body {
            font-family: 'Inter', sans-serif;
        }

        .prose {
            max-width: 65ch;
        }

        .prose h1 {
            font-size: 2.25em;
            font-weight: 800;
            margin-top: 1em;
            margin-bottom: 0.5em;
        }

        .prose h2 {
            font-size: 1.875em;
            font-weight: 700;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
        }

        .prose h3 {
            font-size: 1.5em;
            font-weight: 600;
            margin-top: 1.25em;
            margin-bottom: 0.5em;
        }

        .prose p {
            margin-top: 1em;
            margin-bottom: 1em;
            line-height: 1.75;
        }

        .prose ul,
        .prose ol {
            margin-top: 1em;
            margin-bottom: 1em;
            padding-left: 1.5em;
        }

        .prose li {
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }

        .prose code {
            background: #f1f5f9;
            padding: 0.2em 0.4em;
            border-radius: 0.25em;
            font-size: 0.875em;
        }

        .prose pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1em;
            border-radius: 0.5em;
            overflow-x: auto;
            margin: 1.5em 0;
        }

        .prose pre code {
            background: transparent;
            padding: 0;
        }

        .prose blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 1em;
            font-style: italic;
            color: #64748b;
        }

        .prose a {
            color: #3b82f6;
            text-decoration: underline;
        }

        .prose img {
            border-radius: 0.5em;
            margin: 2em 0;
        }
    </style>
</head>

<body class="bg-slate-50">
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 w-full z-50 py-4 px-8 bg-white border-b border-slate-200">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <a href="index.html"
                class="logo-font font-bold text-3xl italic bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">
                Prashant Baral
            </a>
            <ul class="hidden md:flex items-center space-x-8">
                <li><a href="about.html" class="text-sm font-medium text-slate-600 hover:text-blue-600">about.</a></li>
                <li><a href="projects.html" class="text-sm font-medium text-slate-600 hover:text-blue-600">projects.</a>
                </li>
                <li><a href="portfolio.html"
                        class="text-sm font-medium text-slate-600 hover:text-blue-600">portfolio.</a></li>
                <li><a href="blogs.html" class="text-sm font-medium text-blue-600">blogs.</a></li>
                <li><a href="contact.html" class="text-sm font-medium text-slate-600 hover:text-blue-600">contact.</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Blog Post Content -->
    <article class="pt-32 pb-16 px-4 md:px-8">
        <!-- Loading State -->
        <div id="loading" class="max-w-4xl mx-auto">
            <div class="animate-pulse">
                <div class="h-12 bg-gray-200 rounded w-3/4 mb-4"></div>
                <div class="h-6 bg-gray-200 rounded w-1/2 mb-8"></div>
                <div class="h-64 bg-gray-200 rounded mb-8"></div>
                <div class="space-y-3">
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded"></div>
                    <div class="h-4 bg-gray-200 rounded w-5/6"></div>
                </div>
            </div>
        </div>

        <!-- Post Content -->
        <div id="postContent" class="max-w-4xl mx-auto" style="display: none;">
            <!-- Header -->
            <header class="mb-8">
                <a href="blogs.html" class="inline-flex items-center text-blue-600 hover:text-blue-700 mb-6">
                    <i class="fas fa-arrow-left mr-2"></i>
                    Back to Blog
                </a>
                <h1 id="postTitle" class="text-4xl md:text-5xl font-bold text-slate-900 mb-4"></h1>
                <div class="flex items-center text-slate-600 mb-6">
                    <i class="far fa-calendar mr-2"></i>
                    <span id="postDate"></span>
                    <span class="mx-3">•</span>
                    <i class="far fa-user mr-2"></i>
                    <span id="postAuthor"></span>
                </div>
                <div id="postTags" class="flex flex-wrap gap-2 mb-6"></div>
            </header>

            <!-- Featured Image -->
            <img id="postImage" class="w-full rounded-xl mb-8" style="display: none;">

            <!-- Post Body -->
            <div id="postBody" class="prose prose-lg text-slate-700"></div>
        </div>

        <!-- Error State -->
        <div id="error" class="max-w-4xl mx-auto text-center py-16" style="display: none;">
            <div class="text-6xl mb-4">⚠️</div>
            <h2 class="text-3xl font-bold text-slate-900 mb-2">Post Not Found</h2>
            <p class="text-slate-600 mb-6">The blog post you're looking for doesn't exist.</p>
            <a href="blogs.html"
                class="inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Blog
            </a>
        </div>
    </article>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 py-8 px-4 md:px-8">
        <div class="max-w-7xl mx-auto text-center">
            <p class="text-slate-600">&copy; 2024 Prashant Baral. All rights reserved.</p>
        </div>
    </footer>

    <script>
        async function loadBlogPost() {
            const loading = document.getElementById('loading');
            const postContent = document.getElementById('postContent');
            const error = document.getElementById('error');

            try {
                // Get post slug from URL
                const urlParams = new URLSearchParams(window.location.search);
                const postSlug = urlParams.get('post');

                if (!postSlug) {
                    throw new Error('No post specified');
                }

                // Fetch the blog post from GitHub
                const response = await fetch(`https://raw.githubusercontent.com/Prashant-Baral/portfolio-website/master/content/blog/${postSlug}.md`);

                if (!response.ok) {
                    throw new Error('Post not found');
                }

                const content = await response.text();
                const post = parseBlogPost(content);

                // Display post
                displayBlogPost(post);

                loading.style.display = 'none';
                postContent.style.display = 'block';

            } catch (err) {
                console.error('Error loading blog post:', err);
                loading.style.display = 'none';
                error.style.display = 'block';
            }
        }

        function parseBlogPost(content) {
            // Parse frontmatter
            const frontmatterMatch = content.match(/^---\n([\s\S]+?)\n---\n([\s\S]*)$/);

            if (!frontmatterMatch) {
                throw new Error('Invalid post format');
            }

            const frontmatter = {};
            const lines = frontmatterMatch[1].split('\n');

            lines.forEach(line => {
                const colonIndex = line.indexOf(':');
                if (colonIndex > -1) {
                    const key = line.substring(0, colonIndex).trim();
                    let value = line.substring(colonIndex + 1).trim();
                    value = value.replace(/^["']|["']$/g, '');
                    frontmatter[key] = value;
                }
            });

            const body = frontmatterMatch[2];

            return {
                title: frontmatter.title || 'Untitled',
                date: frontmatter.date || new Date().toISOString(),
                author: frontmatter.author || 'Prashant Baral',
                image: frontmatter.image || '',
                tags: frontmatter.tags ? frontmatter.tags.split(',').map(t => t.trim()) : [],
                body: body
            };
        }

        function displayBlogPost(post) {
            // Update page title
            document.getElementById('pageTitle').textContent = `${post.title} - Prashant Baral`;

            // Set title
            document.getElementById('postTitle').textContent = post.title;

            // Set date
            const dateObj = new Date(post.date);
            const formattedDate = dateObj.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('postDate').textContent = formattedDate;

            // Set author
            document.getElementById('postAuthor').textContent = post.author;

            // Set tags
            const tagsContainer = document.getElementById('postTags');
            if (post.tags.length > 0) {
                tagsContainer.innerHTML = post.tags.map(tag =>
                    `<span class="px-3 py-1 bg-blue-100 text-blue-600 text-sm rounded-full">${tag}</span>`
                ).join('');
            }

            // Set image
            if (post.image) {
                const img = document.getElementById('postImage');
                img.src = post.image;
                img.alt = post.title;
                img.style.display = 'block';
            }

            // Convert markdown to HTML and set body
            const html = marked.parse(post.body);
            document.getElementById('postBody').innerHTML = html;
        }

        // Load post when page loads
        document.addEventListener('DOMContentLoaded', loadBlogPost);
    </script>
</body>

</html>